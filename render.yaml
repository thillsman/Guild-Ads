services:
  - type: web
    name: guild-ads-api
    runtime: node
    buildCommand: pnpm install && pnpm build:api
    startCommand: pnpm --filter @guild-ads/api start
    envVars:
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_SERVICE_ROLE_KEY
        sync: false

  - type: web
    name: guild-ads-web
    runtime: node
    buildCommand: pnpm install && pnpm build:web
    startCommand: pnpm --filter @guild-ads/web start
    envVars:
      - key: NEXT_PUBLIC_SUPABASE_URL
        sync: false
      - key: NEXT_PUBLIC_SUPABASE_ANON_KEY
        sync: false
      - key: SUPABASE_SERVICE_ROLE_KEY
        sync: false
      - key: GUILD_ADS_API_URL
        value: https://guild-ads-api.onrender.com
